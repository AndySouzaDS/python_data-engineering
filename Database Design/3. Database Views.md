## Database views

`-> View :` result set of a query
## Tables vs. views

Views have been described as "virtual tables". It's true that views are similar to tables in certain aspects, but there are key differences. In this exercise, you will organize these differences and similarities.

Instructions
> Organize these characteristics into the category that they describe best.

* Only Tables:
   - Part of the physical schema of a database.
* Views & Tables
   - Contains rows and columns
   - Can be queried
   - Has access control
* Only Views
   - Always defined by a query
   - Takes up less memory
## Viewing views

Because views are very useful, it's common to end up with many of them in your database. It's important to keep track of them so that database users know what is available to them.

> The goal of this exercise is to get familiar with viewing views within a database and interpreting their purpose. This is a skill needed when writing database           documentation or organizing views.

Instructions 1/3
- [x] Query the information schema to get views.
- [x] Exclude system views in the results.
```sql
-- Get all non-systems views
SELECT * FROM information_schema.views
WHERE table_schema NOT IN ('pg_catalog', 'information_schema');
```
Instructions 2/3

Question
>What does view1 do?
Possible Answers
- [ ] Returns the content records with reviewids that have been viewed more than 4000 times.
- [x] Returns the content records that have reviews of more than 4000 characters.
- [ ] Returns the first 4000 records in content.
Instructions 3/3

Question
> What does view2 do?
Possible Answers
- [ ] Returns 10 random reviews published in 2017.
- [ ] Returns the top 10 lowest scored reviews published in 2017.
- [x] Returns the top 10 highest scored reviews published in 2017.
## Creating and querying a view

Have you ever found yourself running the same query over and over again? Maybe, you used to keep a text copy of the query in your desktop notes app, but that was all before you knew about views!

> In these Pitchfork reviews, we're particularly interested in high-scoring reviews and if there's a common thread between the works that get high scores. In this       exercise, you'll make a view to help with this analysis so that we don't have to type out the same query often to get these high-scoring reviews.

Instructions 1/2
- [x] Create a view called high_scores that holds reviews with scores above a 9.
```sql
-- Create a view for reviews with a score above 9
CREATE VIEW high_scores AS
SELECT * FROM reviews
WHERE score > 9;
```
Instructions 2/2
- [x] Count the number of records in high_scores that are self-released in the label field of the labels table.
```sql
-- Count the number of self-released works in high_scores
SELECT COUNT(*) FROM high_scores
INNER JOIN labels AS l ON high_scores.reviewid = l.reviewid
WHERE l.label = 'self-released';
```
## Managing views

### granting or revoking access to a view  

`GRANT privilege(s)`or`REVOKE privilege(s)`

`ON object`

`TO role`or`FROM role`
- Privileges : 
  - SELECT
  - INSERT
  - UPDATE 
  - DELETE
- Objects :
  - table, view ,schema ,etc
- Roles : 
  - db user or group of db users   
#### examples 

``` sql
GRANT UPDATE ON ratings TO PUBLIC;

REVOKE INSERT ON films FROM db_user;
```
```sql
--Updating a view eg:
UPDATE films set kind = 'Dramatic' WHERE kind = 'Drama';

--Inserting into a view eg:
INSERT INTO films (code, title, did, date_prod, kind)
   VALUES ('T601', 'Yojimbo', 106, '1961-06-16', *Drama');
   
--Dropping a view eg:
DROP VIEW view_name [ CASCADE| RESTRICT ];

--Redifining a view eg:
CREATE OR REPLACE VIEW viewname AS new_query;

--Altering a view eg:
ALTER VIEW [ IF EXISTS J name ALTER [ COLUMN ] column_name SET DEFAULT expression
ALTER VIEW [ IF EXISTS ] name ALTER [ COLUMN ] column_name DROP DEFAULT
ALTER VIEW [ IF EXISTS ] name owner T0 new_owner
ALTER VIEW [ IF EXISTS J name RENAME TO new name
ALTER VIEW [ IF EXISTS ] name SET SCHEMA new_schema
```
